<!DOCTYPE html>
<html>
<!-- base.html -->
<head>
    <title>europe.xlsm EEC</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        /* geodesix.css */
body {
    margin: 0 0 0 0;
}

html,
body {
    padding: 0;
    font: 11pt Arial, sans-serif
}

table {
    border-collapse: collapse;
}

td {
    padding: 2px 4px 2px 3px
}

th {
    font-weight: bold;
}

/* .classes */

.gm-style .gm-style-iw {
    /* infowindow */
    background-color: lightgoldenrodyellow;
}

.info {
    font: 9pt sans-serif;
    color: #333333;
    cursor: pointer;
    background-color: lightgoldenrodyellow;
    text-align: center;
    font-size: 11pt;
}

.key {
    text-align: right;
    font-weight: bold;
    vertical-align: top;
    white-space: nowrap
}

.popup {
    background-color: #FFFDD0;
    border: 1px solid #333333;
    border-radius: 3px;
    box-shadow: rgba(0, 0, 0, 0.1) 3px 3px;
    font: 11pt Arial, sans-serif;
    display: block;
    padding: 3px;
    position: relative;
    left: 30px;
    top: 30px;
    transition: opacity 1s;
    width: fit-content;
    opacity: 1;
}

    .popup.fade-out {
        opacity: 0;
    }

.tabContent {
    font: 10pt sans-serif;
    border-collapse: collapse;
    table-layout: auto;
}

.value {
    vertical-align: top;
}

/* .ids */

#map {
    width: 100%;
    height: 100%;
    border: 0;
    position: absolute;
}

#matches {
    display: none;
    font: 9pt sans-serif;
    position: absolute;
    background-color: #ffc995;
    border: 1px solid #8e8378;
    top: 5px;
    left: 5px;
    padding: 3px 3px 3px 3px;
}

#top {
    scroll-margin-top: -100px;
}

/* end geodesix.css */
        /* goverlay.css */
.goarrow {
    position: absolute;
    font-family: 'Material Symbols Outlined';
}

.gobox {
    position: absolute;
    border: 2px solid #444444;
    border-radius: 5px;
    background-color: #ffffff;
    box-shadow: rgba(0,0,0,0.2) 3px 3px;
    padding: 3px;
    font-size: 10pt;
}

.gocircle {
    position: absolute;
    font-family: 'Material Symbols Outlined';
    border: 2px solid #666666;
    border-radius: 50%;
    background-color: #ffffff;
    box-shadow: rgba(0,0,0,0.2) 3px 3px;
    font-size: 10pt;
}

.godistance {
    position: absolute;
    border: 2px solid #FFFFFF;
    background-color: #666666;
    color: #ffffff;
    border-radius: 5px;
    box-shadow: rgba(0,0,0,0.2) 3px 3px;
    padding: 3px;
    text-align: center;
    font-size: 10pt;
}

.gofree {
    position: absolute;
    top: 5px;
    left: 5px;
    background-color: #ffffff;
    padding: 3px;
}
/* end goverlay.css */
    </style>
    <script type='text/javascript'>
        // initialise.js
'use strict';
let map;
let minimalStyle;
// minimalstyle.js
minimalStyle = [{
        featureType: "landscape",
        elementType: "all",
        stylers: [{
            visibility: "off"
        }]
    },
    {
        featureType: "poi",
        elementType: "all",
        stylers: [{
            visibility: "off"
        }]
    },
    {
        featureType: "road",
        elementType: "all",
        stylers: [{
            visibility: "off"
        }]
    },
    {
        featureType: "transit",
        elementType: "all",
        stylers: [{
            visibility: "off"
        }]
    },
    {
        featureType: "landscape",
        elementType: "geometry",
        stylers: [{
            hue: "#ff0066"
        },
        {
            saturation: -100
        },
        {
            lightness: 100
        },
        {
            gamma: 0.07
        },
        {
            visibility: "on"
        }]
    },
    {
        featureType: "water",
        elementType: "all",
        stylers: [{
            saturation: 0
        },
        {
            lightness: 50
        },
        {
            visibility: "simplified"
        }]
    },
    {
        featureType: "administrative.province",
        elementType: "all",
        stylers: [{
            visibility: "off"
        }]
    },
    {
        featureType: "administrative.country",
        elementType: "geometry",
        stylers: [{
            hue: "#ff7000"
        },
        {
            lightness: 50
        },
        {
            saturation: 100
        }]
    },
    {
        featureType: "administrative",
        elementType: "labels",
        stylers: [{
            lightness: 40
        }]
}];
// minimalstyle.js
let mapOptions;
let initialisers = [];
var apikey = '';
var libraries = 'geometry';
var startlat = 42;
var startlong = 19;
var startzoom = 4;
var mapstyle = 'roadmap';
var language = 'en';
var region = 'us';


// dynamic library import

  (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
    key: apikey,
    v: "weekly",
    language: language,
    region: region,
    libraries: 'geometry'
  });

function addInitialiser(f) {
    initialisers = initialisers.concat(f);
};

async function initMap() {
    // Are we connected to the Internet ?
    if (typeof google === "undefined") { 
        let text = '<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">' +
            '<html><head><title>No Internet connection</title></head>' +
            '<body>Looks like you are not connected to the Internet!</body></html>';
        let encodedText = encodeURIComponent(text);
        document.location.href = "javascript:(function(){document.open();document.write('" + encodedText + "');document.close();})();";
        return;
    };

    const { Map } = await google.maps.importLibrary("maps");
    map = new google.maps.Map(document.getElementById('map'), {});


    let minimalMapOptions = { name: "minimal" };
    let minimalMapType = new google.maps.StyledMapType(minimalStyle, minimalMapOptions);
    map.mapTypes.set('minimal', minimalMapType);

    mapOptions = {

        zoom: startzoom,
        center: (new google.maps.LatLng(startlat, startlong)),

        draggableCursor: 'crosshair',
        draggingCursor: 'move',

        disableDefaultUI: true,

        panControl: false,
        streetViewControl: false,
        zoomControl: false,
        scaleControl: false,
        navigationControl: false,
        mapTypeControl: false,

        scaleControlOptions: {
            position: google.maps.ControlPosition.BOTTOM_LEFT
        },

        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.ZOOM_PAN,
            position: google.maps.ControlPosition.TOP_LEFT
        },

        mapTypeId: mapstyle,
        mapTypeControlOptions: {
            mapTypeIds: [
                google.maps.MapTypeId.hybrid,
                google.maps.MapTypeId.roadmap,
                google.maps.MapTypeId.satellite,
                google.maps.MapTypeId.terrain,
                'minimal'
            ]
        }
    };
    initialisers.forEach(function (q) {
        q()
    });
    map.setOptions(mapOptions);
}; // initMap
// end initialise.js
        // geodesix.js
'use strict';
addInitialiser(initialiseGeodesix);

let myInfoWindow;
let totaldistance;
let clickMarker = null;
let query = "";
let geocoder = null;
let matchlines = null;
let shadow = null;
let clickIcon = null;
let matchmarkers = null;
let midpoints = null;
let infowindow = null;
let overlays = []; // things he's drawn on this page
let MAPFILES_URL = "https://maps.gstatic.com/intl/en_us/mapfiles/";
let ICONFILES_URL = "https://maps.google.com/mapfiles/ms/icons/";

function addOverlay(id, obj, title, latlng) {

    overlays[id] = obj;
    
    if (title) {
    
        obj.set('title', title)

        if (obj.constructor.name == 'goverlay') {
            const div = obj.div;
            google.maps.event.addListener(obj, 'mouseover',
                function (obj) {
                    let content = '<div class="info">' + this.title + '</div>';
                    let iwo = {
                        content: content,
                        position: this.latlng
                    };
                    myInfoWindow.setOptions(iwo);
                    myInfoWindow.open(map);
                }
            );
        } else {
            google.maps.event.addListener(obj, 'mouseover',
                function (obj) {
                    let content = '<div class="info">' + this.title + '</div>';
                    let iwo = {
                        content: content,
                        position: this.latlng
                    };
                    myInfoWindow.setOptions(iwo);
                    myInfoWindow.open(map);
                }
            );
        }
    };
    obj.set('latlng', latlng);
    zoomToContent();
}
function bearing(a, b) {
    // Given 2 LatLng points, compute bearing in degress
    let lat1 = a.lat() * Math.PI / 180;
    let lng1 = a.lng() * Math.PI / 180;
    let lat2 = b.lat() * Math.PI / 180;
    let lng2 = b.lng() * Math.PI / 180;
    let dLon = lng2 - lng1;
    let y = Math.sin(dLon) * Math.cos(lat2);
    let x = Math.cos(lat1) * Math.sin(lat2) -
        Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);
    let brng = Math.atan2(y, x) * 180 / Math.PI;
    if (brng < 0) {
        brng = brng + 360;
    }
    return brng;
}
function changeZoom(amount) {

    let myzoom = map.getZoom();
    myzoom = parseInt(myzoom) + parseInt(amount);
    setZoom(myzoom);
}
function clickedRightOnMap(event) {
    let latlonvalue = event.latLng.toUrlValue(7); // 7 = 1.11 cm precision
    sendMessage("rightclick", latlonvalue.toString());
}
function closeInfoWindow() {
    myInfoWindow.close();
};

// https://stackoverflow.com/a/2637079/338101
Number.prototype.toRad = function () {
    return this * Math.PI / 180;
}

Number.prototype.toDeg = function () {
    return this * 180 / Math.PI;
}

function destinationPoint(center, bearing, distance) {
    // 0=Northwards, 90=Eastwards
    distance = distance / 6371000;
    bearing = bearing.toRad();

    let lat1 = center.lat().toRad(), lon1 = center.lng().toRad();

    let lat2 = Math.asin(Math.sin(lat1) * Math.cos(distance) +
        Math.cos(lat1) * Math.sin(distance) * Math.cos(bearing));

    let lon2 = lon1 + Math.atan2(Math.sin(bearing) * Math.sin(distance) *
        Math.cos(lat1),
        Math.cos(distance) - Math.sin(lat1) *
        Math.sin(lat2));

    if (isNaN(lat2) || isNaN(lon2)) return null;

    return new google.maps.LatLng(lat2.toDeg(), lon2.toDeg());
}
function drawArrow(id, orig, dest, arrow, scale, strokeColor, strokeWeight, fillColor, fillOpacity) {

    const heading = google.maps.geometry.spherical.computeHeading(orig, dest);
    const centre = latlngCentre(orig.lat(), orig.lng(), dest.lat(), dest.lng());
    const directionMarker = new google.maps.Marker({
        position: centre,
        map: map,
        icon: {
            url: arrow,
            scale: scale,
            strokeColor: strokeColor,
            strokeWeight: strokeWeight,
            fillColor: fillColor,
            fillOpacity: fillOpacity,
            rotation: heading
        }
    });
    directionMarker.set('ne', orig);
    directionMarker.set('sw', dest);
    addOverlay(id, directionMarker, '', pos);
}
function drawCircle(id, lat, lng, radius, content, strokeColor, strokeOpacity, strokeWeight, fillColor, fillOpacity) {
    let center = new google.maps.LatLng(lat, lng);
    let circle = new google.maps.Circle({
        center: center,
        map: map,
        radius: radius,
        strokeColor: strokeColor,
        strokeOpacity: strokeOpacity,
        strokeWeight: strokeWeight,
        fillColor: fillColor,
        fillOpacity: fillOpacity
    });
    let ne = destinationPoint(center, -45, radius * 1.414);
    circle.set('ne', ne)
    let sw = destinationPoint(center, 135, radius * 1.414);
    circle.set('sw', sw)
    addOverlay(id, circle, content, center);

}
//function drawDirections(id, jsonpoints, mode, strokeColor, strokeOpacity, strokeWeight, suppressInfoWindows, suppressMarkers) {

//    let points = eval(jsonpoints);
//    let origin = new google.maps.LatLng(points[0], points[1]);
//    let destination = new google.maps.LatLng(points[points.length - 2], points[points.length - 1]);
//    let waypoints = [];
//    let path = [];
//    let j = 0;

//    for (let i = 2; i < points.length - 1; i += 2) {
//        let wp = new Object(); // a google.maps.DirectionsWaypoint()
//        let point = new google.maps.LatLng(points[i], points[i + 1]);
//        wp.location = point;
//        expandBounds(point);
//        wp.stopover = true;
//        waypoints[j] = wp;
//        j++;
//    }
//    let polylineOptions = {
//        strokeColor: strokeColor,
//        strokeOpacity: strokeOpacity,
//        strokeWeight: strokeWeight
//    };
//    let renderOptions = {
//        suppressInfoWindows: suppressInfoWindows,
//        suppressMarkers: suppressMarkers,
//        polylineOptions: polylineOptions
//    };
//    let dr = new google.maps.DirectionsRenderer(renderOptions);
//    dr.origin = origin;
//    dr.destination = destination;
//    dr.waypoints = waypoints;
//    dr.travelMode = google.maps.DirectionsTravelMode[mode];
//    let ds = new google.maps.DirectionsService();
//    let request = {
//        origin: origin,
//        destination: destination,
//        waypoints: waypoints,
//        travelMode: google.maps.DirectionsTravelMode[mode.toUpperCase()]
//    };

//    totaldistance = -1;

//    ds.route(request, function (response, status) {
//        if (status === google.maps.DirectionsStatus.OK) {
//            dr.setDirections(response);
//            dr.setMap(map);
//            // get distance
//            let directions = dr.getDirections();
//            let routes = directions.routes[0];
//            let legs = routes.legs;
//            let distance = 0;
//            for (i in legs) {
//                let legdistance = legs[i].distance;
//                if (typeof legdistance !== "undefined")
//                    if (typeof legdistance.value !== "undefined")
//                        distance = distance + legdistance.value;
//            }
//            totaldistance = distance;
//        }
//        else {
//            totaldistance = 0;
//            alert(status);
//        }
//    });
//    addOverlay(id, dr, null);
//}
//function drawInfoWindow(id, lat, lng, content) {

//    let poly = new google.maps.InfoWindow({
//        content: content,
//        map: map,
//        position: new google.maps.LatLng(lat, lng)
//    });
//    addOverlay(id, poly, null);
//}
//function drawLegend(id, html, quadrant) {

//    let name = 'geodesix' + id.toString();
//    let div = document.createElement('div');
//    div.style.backgroundColor = 'transparent';
//    div.setAttribute('id', name);
//    div.style.padding = '0px';
//    div.style.fontFamily = 'Arial,sans-serif';
//    div.innerHTML = html;
//    div.index = 1;
//    map.controls[google.maps.ControlPosition[quadrant.toUpperCase()]].push(div);
//}
function drawLine(id, lat1, lon1, lat2, lon2, title, strokeColor, strokeOpacity, strokeWeight) {
    let jsonpoints = [lat1, lon1, lat2, lon2];
    drawPolyLine(id, jsonpoints, title, strokeColor, strokeOpacity, strokeWeight)
}
function drawMarker(id, lat, lng, icon, title, size) {

    let marker = dropMarker(lat, lng, icon, title, size);
    addOverlay(id, marker, title, marker.position);
}
function drawPolygon(id, jsonpoints, title, strokeColor, strokeOpacity, strokeWeight, fillColor, fillOpacity) {

    let points = eval(jsonpoints);
    let paths = new google.maps.MVCArray;
    let bounds = new google.maps.LatLngBounds();
    for (let i = 0; i < points.length; i += 2) {
        let point = new google.maps.LatLng(points[i], points[i + 1]);
        bounds.extend(point);
        paths.push(point);
    }

    let poly = new google.maps.Polygon({
        path: paths,
        map: map,
        geodesic: true,
        strokeColor: strokeColor,
        strokeOpacity: strokeOpacity,
        strokeWeight: strokeWeight,
        fillColor: fillColor,
        fillOpacity: fillOpacity
    });
    poly.set('ne', bounds.getNorthEast());
    poly.set('sw', bounds.getSouthWest());
    addOverlay(id, poly, title, bounds.getCenter());
}
function drawPolyLine(id, jsonpoints, title, strokeColor, strokeOpacity, strokeWeight) {

    let points = eval(jsonpoints);
    let path = new google.maps.MVCArray;
    let bounds = new google.maps.LatLngBounds();
    let j = 0;
    for (let i = 0; i < points.length; i += 2) {
        let point = new google.maps.LatLng(points[i], points[i + 1]);
        bounds.extend(point);
        path.push(point);
    };
    let poly = new google.maps.Polyline({
        path: path,
        map: map,
        strokeColor: strokeColor,
        strokeOpacity: strokeOpacity,
        strokeWeight: strokeWeight
    });
    poly.set('ne', bounds.getNorthEast());
    poly.set('sw', bounds.getSouthWest());
    addOverlay(id, poly, title, bounds.getCenter());
}
function dropMarker(lat, lng, icon, title, size) {

    let theicon = icon;
    if (icon.substring(0, 1) === "{")
        theicon = eval('theicon = ' + theicon);
    let marker = new google.maps.Marker({
        icon: {
            url: theicon,
            scaledSize: new google.maps.Size(size, size)
        },
        map: map,
        position: new google.maps.LatLng(lat, lng),
        title: title,
        visible: true
    });
    return marker;
}
function expandBounds(latlng) {
    if (latlng) {
        let bounds = map.getBounds();
        if (bounds) {
            if (bounds.contains(latlng)) {
                return;
            } else {
                bounds.extend(latlng);
                map.fitBounds(bounds);
            }
        }
    }
}
function geocode(request) {
    if (request.latlng) {
        clickMarker = new google.maps.Marker({
            'position': request.latlng,
            'map': map,
            'title': request.latlng.toString(),
            'clickable': false,
            'icon': new google.maps.MarkerImage(
                ICONFILES_URL + 'red-pushpin.jpg'
            )
        });
        map.panTo(latlng);
        setZoom(16);
    } else {
        geocoder.geocode(request, showResults);
    }
}
function getMarkerImageUrl(resultNum) {

    // Get a numbered maker from Google, A, B, C, etc.
    // https://maps.gstatic.com/intl/en_us/mapfiles/markerA.jpg etc
    return MAPFILES_URL + "marker" + String.fromCharCode(65 + resultNum) + ".jpg";
}
function getResultDescription(result) {
    let bounds = result.geometry.bounds;
    let html = '<table class="tabContent">';
    html += trs(unBracket(result.formatted_address));
    html += '</table>';
    return html;
}
function getResultsListItem(resultNum, resultDescription) {

    // Make a pretty, clickable HTML description of a result
    let html = '<a onclick="gotoMarker(' + resultNum + ')">';
    html += '<div class="info" id="p' + resultNum + '">';
    html += '<table><tr valign="top">';
    html += '<td style="padding: 2px"><img src="' + getMarkerImageUrl(resultNum) + '"/></td>';
    html += '<td style="padding: 2px">' + resultDescription + '</td>';
    html += '</tr></table>';
    html += '</div></a>';
    return html;
}
function gotoMarker(resultNum) {

    // When he clicks on a result marker, take him to the place

    let position = matchmarkers[resultNum].position;
    let title = matchmarkers[resultNum].title;
    let bounds = matchmarkers[resultNum].bounds;
    resetMap();
    clickMarker = new google.maps.Marker({
        'position': position,
        'map': map,
        'title': title,
        'clickable': false,
        'icon': clickIcon,
        'shadow': shadow
    });
    map.panTo(position);
}
function haversine(pos1, pos2) {
    // Compute the Haversine distance between two places.
    // I know that Vincenty's algorithm is more accurate, but unnecessary here and a fuck-sight faster
    let R = 6371; // km
    let lat1r = toRadians(pos1.lat());
    let lon1r = toRadians(pos1.lng());
    let lat2r = toRadians(pos2.lat());
    let lon2r = toRadians(pos2.lng());
    let d = Math.acos(Math.sin(lat1r) * Math.sin(lat2r) + Math.cos(lat1r) * Math.cos(lat2r) * Math.cos(lon2r - lon1r)) * R;
    return d;
}
function initialiseGeodesix() {

    parseUrlParams();

    geocoder = new google.maps.Geocoder();

    myInfoWindow = new google.maps.InfoWindow({});
    google.maps.event.addListener(map, 'rightclick', clickedRightOnMap);
    google.maps.event.addListener(map, 'zoom_changed', zoomChanged);

    if (query) {
        submitQuery(query);
    };
}
function latlngCentre(lat1, lng1, lat2, lng2) {
    // LatLngBounds has getCenter but it's sensitive to NE/SW
    return new google.maps.LatLng((lat1 + lat2) / 2, (lng1 + lng2) / 2);
}
function latlngToScreen(latlng) {

    let numTiles = 1 << map.getZoom();
    let projection = map.getProjection();
    let worldCoordinate = projection.fromLatLngToPoint(latlng);
    let pixelCoordinate = new google.maps.Point(
        worldCoordinate.x * numTiles,
        worldCoordinate.y * numTiles);

    let topLeft = new google.maps.LatLng(
        map.getBounds().getNorthEast().lat(),
        map.getBounds().getSouthWest().lng()
    );

    let topLeftWorldCoordinate = projection.fromLatLngToPoint(topLeft);
    let topLeftPixelCoordinate = new google.maps.Point(
        topLeftWorldCoordinate.x * numTiles,
        topLeftWorldCoordinate.y * numTiles);

    return {
        x: pixelCoordinate.x - topLeftPixelCoordinate.x,
        y: pixelCoordinate.y - topLeftPixelCoordinate.y
    }
}
function loadScript(file) {
    let script = document.createElement("script");
    script.type = "title/javascript";
    script.src = file;
    document.body.appendChild(script);
};
function overlay(id, onoff) {

    let result = "";
    let obj = overlays[id];

    if (typeof obj === "undefined") {
        alert('Layer object ' + id.toString + ' is not defined');
        return;
    }

    switch (onoff.toLowerCase()) {

        case 'true':
            obj.setMap(map);
            result = 'true';
            break;

        case 'false':
            obj.setMap(null);
            result = 'false';
            break;

        default:
            if (obj.getMap() === null)
                result = 'false';
            else
                result = 'true';
            break;
    }
    return result;
}
function parseUrlParams() {

    if (window.location.search) {
        let args = decodeURIComponent(window.location.search).substring(1).split('&');
        for (let i in args) {
            let param = args[i].split('=');
            switch (param[0].toLowerCase()) {
                case 'api':
                    api = param[1];
                    break;
                case 'key':
                    apikey = param[1];
                    break;
                case 'q':
                    query = param[1];
                    break;
                case 'center':
                    let center = parseLatLng(param[1]);
                    if (center !== null) {
                        startlat = center.lat();
                        startlon = center.lng();
                    }
                    break;
                case 'zoom':
                    let zoom = parseInt(param[1]);
                    if (!isNaN(zoom)) {
                        startzoom = zoom;
                    }
                    break;
                case 'region':
                    region = param[1];
                    break;
                case 'language':
                    language = param[1];
                    break;
                case 'version':
                    version = param[1];
                    break;
                case 'mapstyle':
                    mapstyle = param[1].toLowerCase();
                    break;
            }
        }
    }
}
function parseLatLng(value) {
    value.replace('/\s//g');
    let coords = value.split(',');
    let lat = parseFloat(coords[0]);
    let lng = parseFloat(coords[1]);
    if (isNaN(lat) || isNaN(lng)) {
        return null;
    } else {
        return new google.maps.LatLng(lat, lng);
    }
}
function plotMatchesOnMap(results) {

    matchmarkers = new Array(results.length);
    let resultsListHtml = "";

    // Create a handler to select one of the results when he clicks it
    let hitselector = function (mm) {
        return function () {
            selectHit(mm);
        };
    };

    if (results.length === 0) {
        alert(NOTHINGFOUND);
    }

    if (results.length > 1) {
        for (let i = 0; i < results.length; i++) {

            // We know as a fact the Google's marker images (like )
            // are 20 wide by 34 high
            let icon = new google.maps.MarkerImage(getMarkerImageUrl(i), // URL
                new google.maps.Size(20, 34), // True size
                new google.maps.Point(0, 0), // origin
                new google.maps.Point(10, 34)); // anchor

            matchmarkers[i] = new google.maps.Marker({
                'position': results[i].geometry.location,
                'map': map,
                'icon': icon,
                'shadow': shadow,
                'title': results[i].formatted_address,
                bounds: results[i].geometry.bounds
            });

            google.maps.event.addListener(matchmarkers[i], 'click', hitselector(i));

            resultsListHtml += getResultsListItem(i, getResultDescription(results[i]));
        }
        // Display the matches in a nice little box where he can select one
        document.getElementById("matches").innerHTML = resultsListHtml;
        document.getElementById("p0").style.border = "none";
        document.getElementById("matches").style.display = "none";
    }

    // Now, according to the number of results, display on the map too
    if (results.length > 0) { // OK, there were some
        if (results.length === 1) { // There was exactly one result
            let location = results[0].geometry.location.toString();
            let latlong = location;
            latlong.replace('/\s//g');
            latlong = unBracket(latlong);
            let coords = latlong.split(',');
            let lat = parseFloat(coords[0]).toString();
            let lng = parseFloat(coords[1]).toString();
            // Make a nicely decorated marker
            clickMarker = new google.maps.Marker({
                'position': results[0].geometry.location,
                'map': map,
                'title': results[0].formatted_address,
                'clickable': false,
                'icon': clickIcon,
                'shadow': shadow
            });
            map.panTo(results[0].geometry.location);
            setZoom(15);
        } else {
            // Many results, show them all in the viewport and let him choose one
            document.getElementById("matches").style.display = "block";
            zoomToViewports(results);
        }
    }
}
function resetMap() {
    myInfoWindow.close();
    if (clickMarker !== null) {
        clickMarker.setMap(null);
        clickMarker = null;
    }
    for (let i in matchmarkers) {
        matchmarkers[i].setMap(null);
    }
    matchmarkers = [];
    for (let j in matchlines) {
        matchlines[j].setMap(null);
    }
    matchlines = [];

    document.getElementById("matches").innerHTML = "";
    document.getElementById("matches").style.display = "none";
}
function sendMessage(command, data) {
    let wv = window.chrome.webview;
    if (wv) {
        let json = { 'command': command, 'data': data };
        window.chrome.webview.postMessage(json);
    }
}
function setCenter(lat, lng) {
    let center = new google.maps.LatLng(lat, lng);
    map.setCenter(center);
}
function setZoom(zoom) {
    map.setZoom(zoom);
    zoomChanged();
}
function selectHit(mm) {
    gotoMarker(mm);
}
function setMapStyle(style) {
    let mapstyle = style;
    map.setMapTypeId(mapstyle);
}
function showResults(results, status) {

    if (status === google.maps.GeocoderStatus.OK) {
        plotMatchesOnMap(results);
    } else {
        alert(String(status));
    }
}
function showRoute(origin, destination, mode) {

    let directionsRenderer;
    let directionsService = new google.maps.DirectionsService();
    // draw lines in red, easier to see
    let polylineOptions = {
        strokeColor: '#FF0000'
    };
    let renderOptions = {
        polylineOptions: polylineOptions
    };
    //directionsDisplay = new google.maps.DirectionsRenderer(renderOptions);
    directionsRenderer = new google.maps.DirectionsRenderer({
        preserveViewport: true,
        suppressMarkers: true
    });
    directionsRenderer.setMap(map);
    let request = {
        origin: { query: origin },
        destination: { query: destination },
        travelMode: mode.toUpperCase()
    };
    directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsRenderer.setDirections(response);
            map.fitBounds(response.routes[0].bounds);
        }
        else
            alert(status);
    });
}
function submitQuery(query) {
    resetMap();
    if (query !== "") {
        let latlng = parseLatLng(query);
        if (latlng === null) {
            geocode({
                'address': query
            });
        } else {
            clickMarker = new google.maps.Marker({
                'position': latlng,
                'map': map,
                'title': "",
                'clickable': false,
                'icon': new google.maps.MarkerImage(
                    ICONFILES_URL + 'red-pushpin.jpg'
                )
            });
            map.panTo(latlng);
            setZoom(12);
        }
    }
}
function toRadians(a) {
    return a * (Math.PI / 180);
}
function tr(key, value) {
    return '<tr>' + '<td class="key">' + key + (key ? ':' : '') + '</td>' + '<td class="value">' + value + '</td>' + '</tr>';
}
function trs(value) {
    return '<tr>' + '<td class="key"></td>' + '<td class="value">' + value + '</td>' + '</tr>';
}
function unBracket(s) {
    // Remove parenthses from start/end of a string
    let a;
    a = s;
    if (a.substring(0, 1) === '(') a = a.substring(1);
    if (a.substring(a.length - 1, 1) === ')') a = a.substring(0, a.length - 2);
    return a;
}
function zoomChanged() {
    sendMessage("zoomChanged", map.getZoom());
}
function zoomToContent() {

    let fit = 0;
    let bounds = new google.maps.LatLngBounds();
    for (let i = 0; i < overlays.length; i++) {
        let obj = overlays[i];
        if (obj) {
            let ne = obj.get('ne');
            let sw = obj.get('sw');
            if (ne && sw) {
                bounds.extend(ne);
                bounds.extend(sw);
                fit += 2;
            } else {
                let latlng = obj.get('latlng');
                if (latlng) {
                    bounds.extend(latlng);
                    fit += 1;
                };
            }
        }
    };
    if (fit < 2) { // Only one object, don't do sily zoom=22
        let centre = bounds.getCenter();
        map.panTo(centre);
        map.setZoom(16);
    } else {
        map.fitBounds(bounds);
    }
}
function zoomToViewports(results) {

    // For a given set of results, zoom the viewport so that they are all visible
    let bounds = new google.maps.LatLngBounds();

    for (let i = 0; i < results.length; i++) {
        bounds.union(results[i].geometry.viewport);
    }
}
// end geodesix.js
        let task = initMap();
        task.then((result) => {
            /* drawDecorations */
function drawDecorations() {
/*  goverlay.js */
class goverlay extends google.maps.OverlayView {

    id;
    type;
    latlng;
    icon;
    title;
    size;
    color;
    align;
    angle;
    symbols;

    div;
    span;
    fixed;

    constructor(id, type, latlng, icon, title, size, color, align, angle, symbols) {
        super();
        this.id = id;
        this.type = type;
        this.latlng = latlng;
        this.icon = icon;
        this.title = title;
        this.size = size;
        this.color = color;
        this.align = align;
        this.angle = angle;
        if (symbols) 
            this.symbols = symbols
        else
            this.symbols = 'outlined';
        this.fixed = false;

        this.div = document.createElement('div');
        this.div.className = 'go'+this.type; 

        switch (this.type) {

            case 'arrow': // Arrows
                this.fixed = true;
                this.span = document.createElement('span');
                this.div.appendChild(this.span);
                this.span.className = 'material-symbols-outlined';
                this.span.style.fontSize = this.size + 'px';
                this.span.innerHTML = this.icon;
                if (this.angle != 0)
                    // 1px is a hack to get rotatated material symbols to align correctly
                    this.span.style.transform = 'rotate('+this.angle+'deg) translate(1px)'
                break;

            case 'box': // text in a box
                this.div.innerHTML = this.icon;
                break;

            case 'circle': // material icon in a circle
                this.fixed = true;
                this.div.style.fontSize = this.size + 'px';
                this.div.innerHTML = this.icon;
                this.div.classList.add("material-symbols-outlined");
                const padding = 5;
                this.div.style.padding = padding + 'px';
                // increase size from icon size to circle size
                this.size = this.size * 2 + padding;
                break;

            case 'distance': // CSS .goverlay .distance will look after formatting
                this.div.innerHTML = this.icon;
                break;

            case 'free': // Replace div with a Span
                this.div.innerHTML = this.icon;
                break;

            case 'marker':
                const marker = dropMarker(this.latlng.lat(), this.latlng.lng(), icon, title, size)
                this.div.appendChild(marker);
                break;

        };
        if (this.color)
            this.div.style.color = this.color;

        //console.log('create '+this.type+' @ '+this.latlng.lat+','+this.latlng.lng+
        //    ' cw='+this.div.clientWidth+' ch='+this.div.clientHeight+
        //    ' w=2'+this.div.style.width+' h='+this.div.style.height);


    }

    // onAdd is called when the map's panes are ready and the overlay has been added to the map.
    onAdd() {

        // Add the element to the "overlayLayer" pane.
        const panes = this.getPanes();

        panes.overlayMouseTarget.appendChild(this.div);

        // Hack for mousemove
        // https://stackoverflow.com/a/3402480/338101
        let me = this;
        google.maps.event.addDomListener(me.div, 'mouseover', function() {
            google.maps.event.trigger(me, 'mouseover');
        });
    }
    draw() {
        const overlayProjection = this.getProjection();
        const center = overlayProjection.fromLatLngToDivPixel(this.latlng);

        if (this.type == 'free') {
            return;
        }

        let height;
        let width;
        if (this.fixed) {
            height = this.size;
            width = this.size;
        } else {
            height = this.div.clientHeight;
            width = this.div.clientWidth;
        }
        let height2 = height / 2;
        let width2 = width / 2;

        let left = center.x - width2;
        let top = center.y - height2;

        //console.log('draw '+this.type+' @ '+this.latlng.lat+','+this.latlng.lng+
        //            ' l='+left+' top='+top+' w='+width+' h='+height);

        switch(this.align.toLowerCase().substring(0, 1)) {
            case 'b':
                top = top + height2 + 2;
                break;
            case 't':
                top = top - height2 - 2;
                break
            case 'l':
                left = left - width2 - 2;
                break
            case 'r':
                left = left + width2 + 2;
                break
        };

        this.div.style.left = left + "px";
        this.div.style.top = top + "px";
    }
    /**
     * The onRemove() method will be called automatically from the API if
     * we ever set the overlay's map property to 'null'.
     */
    onRemove() {
        if (this.div) {
            this.div.parentNode.removeChild(this.div);
            delete this.div;
        }
    }
    /**
     *  Set the visibility to 'hidden' or 'visible'.
     */
    hide() {
        if (this.div) {
            this.div.style.visibility = "hidden";
        }
    }
    show() {
        if (this.div) {
            this.div.style.visibility = "visible";
        }
    }
    toggle() {
        if (this.div) {
            if (this.div.style.visibility === "hidden") {
                this.show();
            } else {
                this.hide();
            }
        }
    }
    toggleDOM(map) {
        if (this.getMap()) {
            this.setMap(null);
        } else {
            this.setMap(map);
        }
    }
}

function drawGoverlay(id, type, latlng, icon, title, size, color, align, angle, symbols) {
    let mi = new goverlay(id, type, latlng, icon, title, size, color, align, angle, symbols);
    mi.setMap(map);
    addOverlay(id, mi, title, latlng);
    return mi
};
/*  end goverlay.js */
drawMarker(
                    68,
                    48.2080696, 
                    16.3713095,
                    'http://upload.wikimedia.org/wikipedia/commons/4/41/Flag_of_Austria.svg',
                    '<table><tr><td align=right>State</td><td align=left>Austria</tr><tr><td align=right>Capital</td><td align=left>Vienna</tr><tr><td align=right>Name</td><td align=left>Republik Österreich</tr><tr><td align=right>Joined</td><td align=left>1995</tr><tr><td align=right>Population</td><td align=left>8,372,930</tr><tr><td align=right>km²</td><td align=left>83,871</tr><tr><td align=right>GDP</td><td align=left>38,838</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    69,
                    50.8503396, 
                    4.3517103,
                    'http://upload.wikimedia.org/wikipedia/commons/9/92/Flag_of_Belgium_%28civil%29.svg',
                    '<table><tr><td align=right>State</td><td align=left>Belgium</tr><tr><td align=right>Capital</td><td align=left>Brussels</tr><tr><td align=right>Name</td><td align=left>Koninkrijk België</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>10,827,519</tr><tr><td align=right>km²</td><td align=left>30,528</tr><tr><td align=right>GDP</td><td align=left>35,421</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    70,
                    42.6977082, 
                    23.3218675,
                    'http://upload.wikimedia.org/wikipedia/commons/9/9a/Flag_of_Bulgaria.svg',
                    '<table><tr><td align=right>State</td><td align=left>Bulgaria</tr><tr><td align=right>Capital</td><td align=left>Sofia</tr><tr><td align=right>Name</td><td align=left>Република България</tr><tr><td align=right>Joined</td><td align=left>2007</tr><tr><td align=right>Population</td><td align=left>7,576,751</tr><tr><td align=right>km²</td><td align=left>110,910</tr><tr><td align=right>GDP</td><td align=left>11,900</tr><tr><td align=right>Currency</td><td align=left>Bulgarian Lev</tr></table>',
                    24
                );
drawMarker(
                    71,
                    35.1855659, 
                    33.3822764,
                    'http://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Cyprus.svg',
                    '<table><tr><td align=right>State</td><td align=left>Cyprus</tr><tr><td align=right>Capital</td><td align=left>Nicosia</tr><tr><td align=right>Name</td><td align=left>Κυπριακή Δημοκρατία</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>801,851</tr><tr><td align=right>km²</td><td align=left>9,251</tr><tr><td align=right>GDP</td><td align=left>28,544</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    72,
                    50.0755381, 
                    14.4378005,
                    'http://upload.wikimedia.org/wikipedia/commons/c/cb/Flag_of_the_Czech_Republic.svg',
                    '<table><tr><td align=right>State</td><td align=left>Czech Republic</tr><tr><td align=right>Capital</td><td align=left>Prague</tr><tr><td align=right>Name</td><td align=left>Česká republika</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>10,512,397</tr><tr><td align=right>km²</td><td align=left>78,866</tr><tr><td align=right>GDP</td><td align=left>24,093</tr><tr><td align=right>Currency</td><td align=left>Czech koruna</tr></table>',
                    24
                );
drawMarker(
                    73,
                    55.6760968, 
                    12.5683371,
                    'http://upload.wikimedia.org/wikipedia/commons/9/9c/Flag_of_Denmark.svg',
                    '<table><tr><td align=right>State</td><td align=left>Denmark</tr><tr><td align=right>Capital</td><td align=left>Copenhagen</tr><tr><td align=right>Name</td><td align=left>Kongeriget Danmark</tr><tr><td align=right>Joined</td><td align=left>1973</tr><tr><td align=right>Population</td><td align=left>5,547,088</tr><tr><td align=right>km²</td><td align=left>43,094</tr><tr><td align=right>GDP</td><td align=left>35,757</tr><tr><td align=right>Currency</td><td align=left>Danish krone</tr></table>',
                    24
                );
drawMarker(
                    74,
                    59.4369608, 
                    24.7535746,
                    'http://upload.wikimedia.org/wikipedia/commons/8/8f/Flag_of_Estonia.svg',
                    '<table><tr><td align=right>State</td><td align=left>Estonia</tr><tr><td align=right>Capital</td><td align=left>Tallinn</tr><tr><td align=right>Name</td><td align=left>Eesti Vabariik</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>1,340,274</tr><tr><td align=right>km²</td><td align=left>45,226</tr><tr><td align=right>GDP</td><td align=left>17,908</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    75,
                    60.1698557, 
                    24.938379,
                    'http://upload.wikimedia.org/wikipedia/commons/b/bc/Flag_of_Finland.svg',
                    '<table><tr><td align=right>State</td><td align=left>Finland</tr><tr><td align=right>Capital</td><td align=left>Helsinki</tr><tr><td align=right>Name</td><td align=left>Suomen tasavalta</tr><tr><td align=right>Joined</td><td align=left>1995</tr><tr><td align=right>Population</td><td align=left>5,350,475</tr><tr><td align=right>km²</td><td align=left>338,145</tr><tr><td align=right>GDP</td><td align=left>33,555</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    76,
                    48.8575475, 
                    2.3513765,
                    'http://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg',
                    '<table><tr><td align=right>State</td><td align=left>France</tr><tr><td align=right>Capital</td><td align=left>Paris</tr><tr><td align=right>Name</td><td align=left>République française</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>64,709,480</tr><tr><td align=right>km²</td><td align=left>674,843</tr><tr><td align=right>GDP</td><td align=left>33,678</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    77,
                    52.5200066, 
                    13.404954,
                    'http://upload.wikimedia.org/wikipedia/commons/b/ba/Flag_of_Germany.svg',
                    '<table><tr><td align=right>State</td><td align=left>Germany</tr><tr><td align=right>Capital</td><td align=left>Berlin</tr><tr><td align=right>Name</td><td align=left>Bundesrepublik Deutschland</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>81,757,595</tr><tr><td align=right>km²</td><td align=left>357,050</tr><tr><td align=right>GDP</td><td align=left>34,212</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    78,
                    37.9838096, 
                    23.7275388,
                    'http://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Greece.svg',
                    '<table><tr><td align=right>State</td><td align=left>Greece</tr><tr><td align=right>Capital</td><td align=left>Athens</tr><tr><td align=right>Name</td><td align=left>Ελληνική Δημοκρατία</tr><tr><td align=right>Joined</td><td align=left>1981</tr><tr><td align=right>Population</td><td align=left>11,125,179</tr><tr><td align=right>km²</td><td align=left>131,990</tr><tr><td align=right>GDP</td><td align=left>29,881</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    79,
                    47.497912, 
                    19.040235,
                    'http://upload.wikimedia.org/wikipedia/commons/c/c1/Flag_of_Hungary.svg',
                    '<table><tr><td align=right>State</td><td align=left>Hungary</tr><tr><td align=right>Capital</td><td align=left>Budapest</tr><tr><td align=right>Name</td><td align=left>Magyar Köztársaság</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>10,013,628</tr><tr><td align=right>km²</td><td align=left>93,030</tr><tr><td align=right>GDP</td><td align=left>18,566</tr><tr><td align=right>Currency</td><td align=left>Hungarian forint</tr></table>',
                    24
                );
drawMarker(
                    80,
                    53.3498053, 
                    -6.2603097,
                    'http://upload.wikimedia.org/wikipedia/commons/4/45/Flag_of_Ireland.svg',
                    '<table><tr><td align=right>State</td><td align=left>Ireland</tr><tr><td align=right>Capital</td><td align=left>Dublin</tr><tr><td align=right>Name</td><td align=left>Éire</tr><tr><td align=right>Joined</td><td align=left>1973</tr><tr><td align=right>Population</td><td align=left>4,467,854</tr><tr><td align=right>km²</td><td align=left>70,273</tr><tr><td align=right>GDP</td><td align=left>39,468</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    81,
                    41.8967068, 
                    12.4822025,
                    'http://upload.wikimedia.org/wikipedia/commons/0/03/Flag_of_Italy.svg',
                    '<table><tr><td align=right>State</td><td align=left>Italy</tr><tr><td align=right>Capital</td><td align=left>Rome</tr><tr><td align=right>Name</td><td align=left>Repubblica italiana</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>60,397,353</tr><tr><td align=right>km²</td><td align=left>301,318</tr><tr><td align=right>GDP</td><td align=left>29,109</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    82,
                    56.9676941, 
                    24.1056221,
                    'http://upload.wikimedia.org/wikipedia/commons/8/84/Flag_of_Latvia.svg',
                    '<table><tr><td align=right>State</td><td align=left>Latvia</tr><tr><td align=right>Capital</td><td align=left>Riga</tr><tr><td align=right>Name</td><td align=left>Latvijas Republika</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>2,248,961</tr><tr><td align=right>km²</td><td align=left>64,589</tr><tr><td align=right>GDP</td><td align=left>14,254</tr><tr><td align=right>Currency</td><td align=left>Latvian lats</tr></table>',
                    24
                );
drawMarker(
                    83,
                    54.6871555, 
                    25.2796514,
                    'http://upload.wikimedia.org/wikipedia/commons/1/11/Flag_of_Lithuania.svg',
                    '<table><tr><td align=right>State</td><td align=left>Lithuania</tr><tr><td align=right>Capital</td><td align=left>Vilnius</tr><tr><td align=right>Name</td><td align=left>Lietuvos Respublika</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>3,329,227</tr><tr><td align=right>km²</td><td align=left>65,303</tr><tr><td align=right>GDP</td><td align=left>16,542</tr><tr><td align=right>Currency</td><td align=left>Lithuanian litas</tr></table>',
                    24
                );
drawMarker(
                    84,
                    49.815273, 
                    6.129583,
                    'http://upload.wikimedia.org/wikipedia/commons/d/da/Flag_of_Luxembourg.svg',
                    '<table><tr><td align=right>State</td><td align=left>Luxembourg</tr><tr><td align=right>Capital</td><td align=left>Luxembourg</tr><tr><td align=right>Name</td><td align=left>Grand-Duché de Luxembourg</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>502,207</tr><tr><td align=right>km²</td><td align=left>2,586</tr><tr><td align=right>GDP</td><td align=left>78,395</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    85,
                    35.8992375, 
                    14.5140996,
                    'http://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Malta.svg',
                    '<table><tr><td align=right>State</td><td align=left>Malta</tr><tr><td align=right>Capital</td><td align=left>Valletta</tr><tr><td align=right>Name</td><td align=left>Repubblika ta Malta</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>416,333</tr><tr><td align=right>km²</td><td align=left>316</tr><tr><td align=right>GDP</td><td align=left>23,583</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    86,
                    52.3675734, 
                    4.9041389,
                    'http://upload.wikimedia.org/wikipedia/commons/2/20/Flag_of_the_Netherlands.svg',
                    '<table><tr><td align=right>State</td><td align=left>Netherlands</tr><tr><td align=right>Capital</td><td align=left>Amsterdam</tr><tr><td align=right>Name</td><td align=left>Koninkrijk der Nederlanden</tr><tr><td align=right>Joined</td><td align=left>Founder</tr><tr><td align=right>Population</td><td align=left>16,576,800</tr><tr><td align=right>km²</td><td align=left>41,526</tr><tr><td align=right>GDP</td><td align=left>39,937</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    87,
                    52.2296756, 
                    21.0122287,
                    'http://upload.wikimedia.org/wikipedia/commons/1/12/Flag_of_Poland.svg',
                    '<table><tr><td align=right>State</td><td align=left>Poland</tr><tr><td align=right>Capital</td><td align=left>Warsaw</tr><tr><td align=right>Name</td><td align=left>Rzeczpospolita Polska</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>38,163,895</tr><tr><td align=right>km²</td><td align=left>312,683</tr><tr><td align=right>GDP</td><td align=left>18,072</tr><tr><td align=right>Currency</td><td align=left>Polish złoty</tr></table>',
                    24
                );
drawMarker(
                    88,
                    38.7222524, 
                    -9.1393366,
                    'http://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Portugal.svg',
                    '<table><tr><td align=right>State</td><td align=left>Portugal</tr><tr><td align=right>Capital</td><td align=left>Lisbon</tr><tr><td align=right>Name</td><td align=left>República Portuguesa</tr><tr><td align=right>Joined</td><td align=left>1986</tr><tr><td align=right>Population</td><td align=left>11,317,192</tr><tr><td align=right>km²</td><td align=left>92,391</tr><tr><td align=right>GDP</td><td align=left>21,858</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    89,
                    44.4267674, 
                    26.1025384,
                    'http://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Romania.svg',
                    '<table><tr><td align=right>State</td><td align=left>Romania</tr><tr><td align=right>Capital</td><td align=left>Bucharest</tr><tr><td align=right>Name</td><td align=left>România</tr><tr><td align=right>Joined</td><td align=left>2007</tr><tr><td align=right>Population</td><td align=left>21,466,174</tr><tr><td align=right>km²</td><td align=left>238,391</tr><tr><td align=right>GDP</td><td align=left>11,917</tr><tr><td align=right>Currency</td><td align=left>Romanian leu</tr></table>',
                    24
                );
drawMarker(
                    90,
                    48.1485965, 
                    17.1077477,
                    'http://upload.wikimedia.org/wikipedia/commons/e/e6/Flag_of_Slovakia.svg',
                    '<table><tr><td align=right>State</td><td align=left>Slovakia</tr><tr><td align=right>Capital</td><td align=left>Bratislava</tr><tr><td align=right>Name</td><td align=left>Slovenská republika</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>5,424,057</tr><tr><td align=right>km²</td><td align=left>49,037</tr><tr><td align=right>GDP</td><td align=left>21,244</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    91,
                    46.0569465, 
                    14.5057515,
                    'http://upload.wikimedia.org/wikipedia/commons/f/f0/Flag_of_Slovenia.svg',
                    '<table><tr><td align=right>State</td><td align=left>Slovenia</tr><tr><td align=right>Capital</td><td align=left>Ljubljana</tr><tr><td align=right>Name</td><td align=left>Republika Slovenija</tr><tr><td align=right>Joined</td><td align=left>2004</tr><tr><td align=right>Population</td><td align=left>2,054,119</tr><tr><td align=right>km²</td><td align=left>20,273</tr><tr><td align=right>GDP</td><td align=left>27,654</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    92,
                    40.4167754, 
                    -3.7037902,
                    'http://upload.wikimedia.org/wikipedia/commons/9/9a/Flag_of_Spain.svg',
                    '<table><tr><td align=right>State</td><td align=left>Spain</tr><tr><td align=right>Capital</td><td align=left>Madrid</tr><tr><td align=right>Name</td><td align=left>Reino de España</tr><tr><td align=right>Joined</td><td align=left>1986</tr><tr><td align=right>Population</td><td align=left>46,087,170</tr><tr><td align=right>km²</td><td align=left>506,030</tr><tr><td align=right>GDP</td><td align=left>31,963</tr><tr><td align=right>Currency</td><td align=left>Euro</tr></table>',
                    24
                );
drawMarker(
                    93,
                    59.3293235, 
                    18.0685808,
                    'http://upload.wikimedia.org/wikipedia/commons/4/4c/Flag_of_Sweden.svg',
                    '<table><tr><td align=right>State</td><td align=left>Sweden</tr><tr><td align=right>Capital</td><td align=left>Stockholm</tr><tr><td align=right>Name</td><td align=left>Konungariket Sverige</tr><tr><td align=right>Joined</td><td align=left>1995</tr><tr><td align=right>Population</td><td align=left>9,347,899</tr><tr><td align=right>km²</td><td align=left>449,964</tr><tr><td align=right>GDP</td><td align=left>35,964</tr><tr><td align=right>Currency</td><td align=left>Swedish krona</tr></table>',
                    24
                );
}; /* end drawDecorations */
drawDecorations();
zoomToContent();

        });
    </script>
</head>
<body>
    <div id="map"></div>
    <div id="matches"></div>
    <noscript>Javascript disabled. Maps cannot be displayed.</noscript>
    
</body>
</html> <!-- end base.html -->
